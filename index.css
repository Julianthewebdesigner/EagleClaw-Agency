/* Ensure proper grid behavior and prevent overflow issues */
.grid {
  width: 100%;
}

/* Fix for mobile Safari 3D transform issues */
@media (max-width: 768px) {
  .group {
    transform: none !important;
    perspective: none !important;
  }

  /* Disable 3D transforms on mobile */
  * {
    transform-style: flat !important;
    -webkit-transform-style: flat !important;
  }

  /* Force GPU acceleration for smoother animations */
  .motion-div,
  [class*="motion-"] {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000;
    perspective: 1000;
  }
}

/* Prevent horizontal overflow - use 100% instead of 100vw for iOS Safari */
body, html {
  max-width: 100%;
  overflow-x: hidden;
}

/* Ensure no element uses 100vw */
* {
  max-width: 100%;
}

/* Allow specific elements to use full width */
.grid,
.w-full,
[class*="w-full"] {
  max-width: none;
}

/* Responsive image and media protection */
img,
video,
iframe,
svg {
  max-width: 100%;
  height: auto;
}

/* Ensure SVG foreignObject content is responsive */
foreignObject {
  width: 100%;
  height: 100%;
}

foreignObject img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* Safari-specific fixes */
@supports (-webkit-touch-callout: none) {
  /* iOS Safari */
  body {
    -webkit-overflow-scrolling: touch;
  }

  /* Prevent rubber-band horizontal scroll */
  html,
  body {
    overflow-x: hidden;
    position: relative;
    width: 100%;
  }
}

/* MacBook scan animation */
@keyframes scan {
  0% {
    transform: translateY(-100%);
    opacity: 0;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateY(200%);
    opacity: 0;
  }
}
